---
title: 実装計画書（テンプレート）
project: "<プロジェクト名>"
version: "v0.1"
owner: "<作成者>"
last_updated: "YYYY-MM-DD"
---

# 1. 概要

## 1.1 目的

* チームで並行実装しつつ、依存関係を崩さず効率的に開発する
* この計画書をもとにメンバーへ **ざっくりタスク** を割り振る（詳細タスクは各ブランチ/Issueで作成）
* 設計ドキュメントに基づき、手戻りのない実装ラインを構築する
* この計画書をもとにメンバーへタスクを割り振り、進捗を管理する

## 1.2 成果物（最終ゴール）

* リリース対象: <Webアプリケーション>, <APIサーバー>

  * 例: Web（Next.js）, API（Go/Node.js）
* リリース形態: 初期リリース (MVP)
* リリース日（目標）: YYYY-MM-DD

## 1.3 スコープ

### In Scope

* <機能を列挙>

  * 例: **ユーザー・認証**: 登録(F-01)、ログイン(F-02)、マイページ(F-03)
  * 例: **商品**: 商品一覧、商品詳細、在庫管理
  * 例: **注文**: 注文作成、注文履歴
  * 例: **管理機能**: 商品管理ダッシュボード

### Out of Scope（今回やらない）

* 例: 決済ゲートウェイ連携（モックで対応）
* 例: 複雑なプロモーション/クーポン機能
* 例: 高度な分析・レポーティング基盤

## 1.4 前提・制約

* 技術スタック:

  * Frontend: Next.js / React
  * Backend: Go (or Node.js)
  * Database: PostgreSQL
  * Infra: Docker / AWS/GCP
* アーキテクチャ: レイヤードアーキテクチャ (Presentation, Application, Domain, Infrastructure)
* 体制/人数: <例: FE2名、BE2名、QA1名…>

## 1.5 参照ドキュメント

* 例: `templates/design/01_basic_design.md`（機能一覧 / 画面遷移）
* 例: `templates/design/screen/<feature-name>_screen_design.md`（画面仕様）
* 例: `templates/design/db/03_db_design.md`（ER図 / テーブル定義）
* 例: `templates/design/02_api_design.md`（API IF / OpenAPI）
* 例: `templates/design/04_architecture_design.md`（アーキテクチャ / ディレクトリ構成）
* 例: `templates/design/05_non_functional_requirements.md`（非機能要件）
* 例: `templates/design/09_roles_permissions.md`（権限 / ロール）

---

# 2. 開発の進め方（チーム戦略）

## 2.1 チーム構成と役割分担

複数人で並行実装しつつ品質を担保するため、以下のような役割分担を推奨します。

> ポイント: 全員が「自分の担当範囲のDRI（Directly Responsible Individual）」を持つ。曖昧さをなくす。

| ロール                   | 人数目安 | 主な責務                     | 担当領域                         |
| --------------------- | ---- | ------------------------ | ---------------------------- |
| **Tech Lead**         | 1名   | アーキテクチャ決定、共通基盤実装、コードレビュー | 基盤 / 難易度高の機能                 |
| **Frontend Engineer** | 1-2名 | UIコンポーネント実装、画面結合、API繋ぎ込み | Presentation Layer           |
| **Backend Engineer**  | 1-2名 | API実装、DB設計・構築、ビジネスロジック   | Application / Domain / Infra |
| **QA / PM**           | 1名   | 仕様策定、受入テスト、進捗管理          | 要件 / テスト                     |

## 2.2 タスクの割り振り方（衝突を減らす戦略）

### 原則

* **境界で割る**: ドメイン（Users / Products / Orders など）または機能スライス単位に担当を固定し、同じファイルを複数人が同時編集しない。
* **共通基盤は集中実装**: セットアップ/CI/認証/共通UIなどはTech Lead（+サポート）で先に整備し、以降の実装を並列化する。
* **決める人を決める**: 迷いが出やすい論点（API形式/認証方式/エラー形式）はDRIを置き、議論を短時間で収束させる。

### 割り振りパターン（おすすめ）

* **縦割り（推奨）**: 1ドメインを1人（または1ペア）が「DB → API → UI」まで持つ（手戻りが最小・認知負荷が低い）。
* **横割り（専門性重視）**: FE/BEで分ける場合は **Contract First（API IF先行）** + **モック/スタブ** で待ち時間を消す。

### 例: 3人チーム（TL + FE + BE）

* TL: 基盤（CI/環境/共通規約）と、レビュー・設計合意の最終責任
* FE: 画面/コンポーネントと、OpenAPIクライアント等のIF同期
* BE: DB/Usecase/API実装（認証とコアドメイン）

### 例: 5人チーム（TL + FE2 + BE2）

* Users / Products / Orders で **ドメインDRI** を置き、相互にレビューして局所最適を防ぐ
* FEは「画面群」で割る（例: カタログ系 / 管理画面系）と衝突が減る

## 2.3 ブランチ/タスク運用

* **ブランチ戦略**: GitHub Flow (mainブランチ守り)

  * feature/xxx ブランチで開発し、PRでマージ。
* **タスク粒度**:

  * 1タスク = 1 PR を基本とする（大きすぎない粒度）。
  * 例: 「商品一覧API実装」「商品一覧UI実装」「DBマイグレーション作成」
* **先行着手**:

  * **Interface First**: APIのIF（OpenAPI等）を最初に合意し、FE/BEが並走できるようにする。

## 2.4 並行開発を成立させる鍵（Contract / Stub / Feature Flag）

* **Contract First**: OpenAPI（or gRPC proto）をPRで合意し、破壊的変更は必ずレビュー対象にする。
* **Stub First**: FEはAPIモック（MSW等）で先行し、BEはハンドラのスケルトン（200/4xx/5xx）から埋める。
* **Feature Flag**: 未完の機能はフラグで隠し、mainに小さくマージして統合コストを下げる。

## 2.5 PR設計のルール（レビュー滞留と衝突を防ぐ）

* 目安: **0.5〜1日で完了** / **差分は小さく**（レビューが30分以内で終わるサイズ）
* ルール: 「DB変更 + API変更 + UI変更」を同一PRに詰め込み過ぎない（結合が必要な場合はスライスとして意図的にまとめる）
* 進捗可視化: `templates/<feature-name>_tasks.md` をコピーし、PRの受け入れ基準と変更ファイルを明記する

## 2.6 進捗管理（おすすめの運用）

* カンバン（Backlog / Ready / In Progress / Review / Done）で管理し、**WIPは1人1件** を基本にする
* 定例:

  * デイリー（15分）: ブロッカー共有・依存関係の早期発見
  * 週次（30〜60分）: スコープ調整・次スプリントの合意
  * レトロ（30分）: 衝突/手戻りの原因を次に反映

## 2.7 Definition of Done（DoD）

* 受け入れ基準が満たされ、主要ケースの手動確認が完了
* テスト（ユニット/統合/スモーク）の追加、または不要な理由が明記されている
* ログ/エラーハンドリング/認可（必要な場合）が実装されている
* 設計・IF・マイグレーションが最新である（設計差分がある場合は先に更新）

## 2.8 開発フロー（並行作業のコツ）

1. **設計固定**: DB設計とAPI IFをTech Lead中心に固める。
2. **基盤実装**: 共通コンポーネント、ベースレイアウト、認証基盤を先行実装。
3. **ドメイン並行**: 「ユーザー」「商品」「注文」のドメインごとに担当を割り振り並行開発。

   * **BE**: DB → Repository → UseCase → Handler の順で実装。
   * **FE**: UIコンポーネント → ページ実装 → ダミーデータでの挙動確認 → API繋ぎ込み。

---

# 3. 依存関係の整理（最重要）

## 3.1 機能・画面一覧（カタログ）

> ここで「何があるか」と「依存」を固定し、実装順と並行作業を成立させる。

### 機能カタログ（例）

* [F-01] 認証
* [F-02] ユーザー設定
* [F-03] 商品一覧
* [F-04] 商品詳細
* [F-05] 注文作成
* [F-06] 注文履歴
* [F-07] 管理：商品管理
* [F-08] 管理：注文管理

### 画面カタログ（例）

* [S-01] ログイン
* [S-02] ホーム
* [S-03] 商品一覧
* [S-04] 商品詳細
* [S-05] カート
* [S-06] 注文確認
* [S-07] 注文完了
* [S-08] 注文履歴

## 3.2 依存関係マトリクス（ざっくりでOK）

| ID   | 種別 | 名称   | 依存（前提）          | 後続（これを待つ）    | 備考      |
| ---- | -- | ---- | --------------- | ------------ | ------- |
| F-01 | 機能 | 認証   | -               | F-02, S-02以降 | 認可も含むか？ |
| S-03 | 画面 | 商品一覧 | F-03(API)       | S-04         | -       |
| S-04 | 画面 | 商品詳細 | F-04(API), S-03 | S-05         | -       |

## 3.3 画面遷移（Mermaid）

```mermaid
flowchart LR
  S01[ログイン] --> S02[ホーム]
  S02 --> S03[商品一覧]
  S03 --> S04[商品詳細]
  S04 --> S05[カート]
  S05 --> S06[注文確認]
  S06 --> S07[注文完了]
  S02 --> S08[注文履歴]
```

---

# 4. モック方針（遷移先がスコープ外/未実装の場合）

## 4.1 ルール

* 遷移先の画面が タスクのスコープ外 かつ 未実装 の場合、該当タスク内では モック画面 を用意してつなぐ
* モックは「遷移の成立」「UI検証」「結合ポイント固定」が目的（本実装の代替ではない）

## 4.2 モックの定義（例）

* モック画面ID: S-MOCK-xx
* 置き換え条件:
* API未完成 → モックデータ/スタブ
* 画面未完成 → モック画面（ダミーUI + 戻る/次へだけ）
* モック除去の責務:
* 後続タスクに「モック除去」チェックを含める

---

# 5. フェーズ別 実装計画（TDD: テスト駆動開発）

各フェーズは **Red → Green → Refactor** のTDDサイクルに従う。テストを先に書き、最小限の実装で通し、リファクタリングする。

## TDDの基本原則

```
┌─────────────────────────────────────────────────────────┐
│  🔴 Red: 失敗するテストを先に書く                          │
│     ↓                                                    │
│  🟢 Green: テストを通す最小限のコードを書く                 │
│     ↓                                                    │
│  🔵 Refactor: コードを整理し、テストが通ることを確認        │
│     ↓                                                    │
│  🔁 繰り返し                                              │
└─────────────────────────────────────────────────────────┘
```

### テストカバレッジ基準

| レイヤー | 最低カバレッジ | テスト種別 |
| :--- | :--- | :--- |
| Domain/UseCase | 80%以上 | Unit Test |
| API Handler | 70%以上 | Integration Test |
| UI Component | 60%以上 | Component Test |
| E2E（主要導線） | 主要シナリオ100% | E2E Test |

---

## Phase 1: プロジェクトセットアップ & テスト基盤構築

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| P0 | T-001 | Repo | - | リポジトリ作成/権限設定 | - | | |
| P0 | T-002 | Env | T-001 | 環境構築（local/dev/stg/prodの雛形） | - | | |
| **P0** | **T-003** | **Test** | T-001 | **テストフレームワーク導入（Jest/Vitest/Go test等）** | **基盤** | | |
| P0 | T-004 | CI | T-003 | CI（lint/test/build）導入 ※テスト必須化 | - | | |
| P1 | T-005 | Base | T-001 | コーディング規約/フォーマッタ導入 | - | | |
| **P1** | **T-006** | **Test** | T-003 | **テストユーティリティ/ヘルパー作成** | **基盤** | | |
| P2 | T-007 | Obs | - | 監視/ログ/エラー通知の最小導入 | - | | |
| P1 | T-008 | Data | T-003 | テスト用フィクスチャ/ファクトリ方針決定 | 基盤 | | |

## Phase 2: 画面遷移の骨格（テストファースト）

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **P0** | **T-009** | **Test** | T-003 | **ルーティングテスト作成（期待するパス/遷移）** | 🔴 Red | | |
| P0 | T-010 | Router | T-009 | ルーティング/ナビゲーション実装 | 🟢 Green | | |
| **P0** | **T-011** | **Test** | T-003 | **画面コンテナのスモークテスト作成** | 🔴 Red | | |
| P0 | T-012 | Screen | T-011 | 画面コンテナ（空画面）を全カタログ分作成（S-xx） | 🟢 Green | | |
| **P1** | **T-013** | **Test** | T-003 | **共通コンポーネントのユニットテスト作成** | 🔴 Red | | |
| P1 | T-014 | UI | T-013 | モック画面枠（S-MOCK）と共通コンポーネント実装 | 🟢 Green | | |
| **P0** | **T-015** | **Test** | T-003 | **認可ガードのテスト作成（未認証→リダイレクト等）** | 🔴 Red | | |
| P0 | T-016 | Auth | T-015 | 認可ガード実装（ログイン前後の遷移） | 🟢 Green | | |
| P1 | T-017 | Refactor | T-016 | Phase 2 リファクタリング & テスト追加 | 🔵 Refactor | | |

## Phase 3: ドメイン基盤（API/DB/共通モジュール）

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| P0 | T-018 | DB | T-002 | DBスキーマ最小セット（主要テーブル） | - | | |
| **P0** | **T-019** | **Test** | T-018 | **Repositoryテスト作成（CRUD操作の期待値）** | 🔴 Red | | |
| P0 | T-020 | Repo | T-019 | Repository実装 | 🟢 Green | | |
| **P0** | **T-021** | **Test** | T-003 | **API型/DTO/バリデーションテスト作成** | 🔴 Red | | |
| P0 | T-022 | API | T-021 | APIの型/DTO/バリデーション実装 | 🟢 Green | | |
| **P0** | **T-023** | **Test** | T-020 | **認証UseCaseテスト作成（成功/失敗/境界値）** | 🔴 Red | | |
| P0 | T-024 | Auth | T-023 | 認証（F-01）UseCase実装 | 🟢 Green | | |
| **P1** | **T-025** | **Test** | T-003 | **共通エラーハンドリングテスト作成** | 🔴 Red | | |
| P1 | T-026 | Base | T-025 | 共通エラーハンドリング/ローディング/リトライ実装 | 🟢 Green | | |
| P1 | T-027 | Refactor | T-026 | Phase 3 リファクタリング & カバレッジ確認 | 🔵 Refactor | | |

## Phase 4: 機能実装（TDDサイクルで進める）

**ここがメイン**。各機能は必ず **テスト → 実装 → リファクタ** の順で進める。

### TDD実装フロー（1機能あたり）

```
1. 🔴 ユニットテスト作成（UseCase/Domain）
2. 🟢 ビジネスロジック実装
3. 🔴 統合テスト作成（API Handler）
4. 🟢 API実装
5. 🔴 コンポーネントテスト作成（UI）
6. 🟢 UI実装
7. 🔵 リファクタリング & カバレッジ確認
```

### タスク（機能単位）

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **P0** | **T-028** | **Test** | T-024 | **認証APIテスト（ログイン成功/失敗/トークン検証）** | 🔴 Red | | |
| P0 | T-029 | F-01 | T-028 | 認証API実装（ログイン/ログアウト） | 🟢 Green | | |
| **P0** | **T-030** | **Test** | T-029 | **ログイン画面テスト（入力/バリデーション/遷移）** | 🔴 Red | | |
| P0 | T-031 | S-01 | T-030 | ログイン画面実装 | 🟢 Green | | |
| **P0** | **T-032** | **Test** | T-020 | **商品一覧APIテスト（取得/ページング/フィルタ）** | 🔴 Red | | |
| P0 | T-033 | F-03 | T-032 | 商品一覧API実装 | 🟢 Green | | |
| **P0** | **T-034** | **Test** | T-033 | **商品一覧画面テスト（表示/検索/遷移）** | 🔴 Red | | |
| P0 | T-035 | S-03 | T-034 | 商品一覧画面実装 | 🟢 Green（モック併用可） | | |
| **P1** | **T-036** | **Test** | T-033 | **商品詳細APIテスト（取得/存在しない場合）** | 🔴 Red | | |
| P1 | T-037 | F-04 | T-036 | 商品詳細API実装 | 🟢 Green | | |
| **P1** | **T-038** | **Test** | T-037 | **商品詳細画面テスト（表示/アクション）** | 🔴 Red | | |
| P1 | T-039 | S-04 | T-038 | 商品詳細画面実装 | 🟢 Green | | |
| P1 | T-040 | Refactor | T-039 | Phase 4 リファクタリング & カバレッジ80%確認 | 🔵 Refactor | | |

※ 各機能で「テスト先行」を徹底。モックはテストダブルとして活用

## Phase 5: 結合テスト & E2Eテスト

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **P0** | **T-041** | **Test** | Phase 4 | **E2Eテスト作成（主要導線：ログイン→一覧→詳細→完了）** | 🔴 Red | | |
| P0 | T-042 | 全体 | T-041 | 主要導線の結合 & E2Eテスト通過 | 🟢 Green | | |
| P0 | T-043 | 全体 | T-042 | モック除去（S-MOCKの置換）& テスト更新 | 🔵 Refactor | | |
| **P1** | **T-044** | **Test** | T-042 | **境界値/異常系テスト追加** | 🔴 Red | | |
| P1 | T-045 | 全体 | T-044 | 権限/境界値/エラー系の統合実装 | 🟢 Green | | |
| P2 | T-046 | Perf | - | パフォーマンステスト & 最適化 | 🔵 Refactor | | |
| P1 | T-047 | Spec | - | 仕様の微修正（テストケースも更新） | 🔵 Refactor | | |

## Phase 6: 品質担保（テストカバレッジ & セキュリティ）

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| P0 | T-048 | QA | Phase 5 | テストカバレッジレポート確認 & 不足箇所特定 | 検証 | | |
| **P1** | **T-049** | **Test** | T-048 | **カバレッジ不足箇所のテスト追加** | 🔴🟢 | | |
| P1 | T-050 | QA | T-049 | 回帰テスト自動化（CI必須テスト化） | 検証 | | |
| **P1** | **T-051** | **Test** | - | **セキュリティテスト（認証バイパス/SQLi/XSS等）** | 🔴 Red | | |
| P1 | T-052 | Sec | T-051 | セキュリティ修正 & 脆弱性スキャン | 🟢 Green | | |
| P2 | T-053 | Ops | - | 運用手順（障害時、問い合わせ対応、ログの見方） | - | | |
| P1 | T-054 | Docs | - | リリースノート草案 | - | | |

## Phase 7: リリース準備 & リリース

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| P0 | T-055 | QA | Phase 6 | **全テスト通過確認（リリース判定条件）** | ✅ 必須 | | |
| P0 | T-056 | Prod | T-055 | リリース判定（Go/No-Go条件）※テスト100%通過必須 | - | | |
| **P0** | **T-057** | **Test** | - | **マイグレーションテスト（stgで検証）** | 🔴🟢 | | |
| P0 | T-058 | DB | T-057 | マイグレーション手順/リハーサル | 🟢 Green | | |
| P0 | T-059 | Prod | - | 本番リリース手順（担当/時間/ロールバック） | - | | |
| P1 | T-060 | Obs | - | 監視強化（リリース直後のアラート） | - | | |
| P0 | T-061 | Prod | T-056 | リリース実施 | - | | |
| **P0** | **T-062** | **Test** | T-061 | **本番スモークテスト実行** | ✅ 検証 | | |
| P0 | T-063 | Prod | T-062 | 初動確認（主要導線/メトリクス） | - | | |

## Phase 8: リリース後 & テスト改善

| 優先 | タスクID | 対象 | 依存 | 内容（ざっくり） | TDDステップ | 担当 | PR/Issue |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| P1 | T-064 | Team | - | 振り返り（KPT）& TDDプロセス改善 | 振り返り | | |
| **P1** | **T-065** | **Test** | - | **テストの技術的負債棚卸し（遅いテスト/フレイキー等）** | 改善 | | |
| P2 | T-066 | Code | - | コードの技術的負債の棚卸し | 改善 | | |
| P1 | T-067 | Ops | - | 運用課題の整理（アラート過多、ログ不足等） | - | | |
| **P2** | **T-068** | **Test** | - | **テスト実行時間の最適化** | 改善 | | |

---

## TDDチェックリスト（各PR必須）

```markdown
## TDD確認項目
- [ ] テストを先に書いた（Red）
- [ ] テストが通る最小限の実装をした（Green）
- [ ] リファクタリング後もテストが通る（Refactor）
- [ ] カバレッジ基準を満たしている
- [ ] 新規テストがCIで実行される
```

---

# 6. 役割分担（ざっくり）

| 領域     | 主担当 | 副担当 | 備考       |
| ------ | --- | --- | -------- |
| FE     |     |     | 画面/共通UI  |
| BE     |     |     | API/DB   |
| QA     |     |     | テスト観点/回帰 |
| DevOps |     |     | CI/CD/監視 |

---

# 7. リスクと対策

| リスク    | 起きそうな理由  | 影響    | 対策             | 監視/トリガー |
| ------ | -------- | ----- | -------------- | ------- |
| 依存の詰まり | 上流API未完成 | 待ち時間増 | 先にIF固定＋モック     | PR滞留日数  |
| 仕様ブレ   | 合意不足     | 手戻り   | Phase0で固定、変更履歴 | 変更要求件数  |

---

# 8. 変更履歴

| 日付         | 変更者 | 変更内容 | 理由 |
| ---------- | --- | ---- | -- |
| YYYY-MM-DD |     | 初版   | -  |

---
